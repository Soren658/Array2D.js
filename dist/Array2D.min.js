// Array2D.js 0.0.4
// Copyright (c) 2014 Matthew Trost
// Array2D.js may be freely distributed under the MIT license.
(function(){function r(r){return"[object Array]"===Object.prototype.toString.call(r)}function n(r){return null===r}function t(r){return void 0===r}function e(r){return n(r)||t(r)}function u(r){return!e(r)}function o(r){return!t(r)}function a(r){for(var n=[],t=0,e=r.length;e>t;t++)n[t]=r[t];return n}function i(r,n,t,e,u,o,a,h,l,s,c){if(!f(h,n,t)&&(h[n]||(h[n]=[]),h[n][t]=!0,t>-1&&u>t&&n>-1&&o>n&&l(r,n,t,e))){c||(c=[],a.push(c)),c.push([n,t]);var v=n-1,g=n+1,d=t-1,p=t+1;v>-1&&o>v&&i(e[v][t],v,t,e,u,o,a,h,l,s,c),g>-1&&o>g&&i(e[g][t],g,t,e,u,o,a,h,l,s,c),d>-1&&u>d&&i(e[n][d],n,d,e,u,o,a,h,l,s,c),p>-1&&u>p&&i(e[n][p],n,p,e,u,o,a,h,l,s,c),s&&(v>-1&&o>v&&d>-1&&u>d&&i(e[v][d],v,d,e,u,o,a,h,l,s,c),v>-1&&o>v&&p>-1&&u>p&&i(e[v][p],v,p,e,u,o,a,h,l,s,c),g>-1&&o>g&&d>-1&&u>d&&i(e[g][d],g,d,e,u,o,a,h,l,s,c),g>-1&&o>g&&p>-1&&u>p&&i(e[g][p],g,p,e,u,o,a,h,l,s,c))}}function f(r,n,t){return r[n]&&r[n][t]===!0}var h=this,l=h.Array2D,s=function(){return this instanceof s?void 0:new s};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports.Array2D=s):h.Array2D=s,s.VERSION="0.0.4",s.noConflict=function(){return h.Array2D=l,this},s.AXES={X:1,Y:2},s.BEARINGS={NORTH:1,NORTHWEST:2,NORTHEAST:3,SOUTH:4,SOUTHWEST:5,SOUTHEAST:6,EAST:7,WEST:8},s.BOUNDARIES={UPPER:1,LOWER:2,LEFT:3,RIGHT:4},s.CORNERS={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_LEFT:3,BOTTOM_RIGHT:4},s.CROOKS={UPPER_LEFT:1,UPPER_RIGHT:2,LOWER_LEFT:3,LOWER_RIGHT:4},s.DIRECTIONS={UP:1,DOWN:2,LEFT:3,RIGHT:4},s.EDGES={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4},s.QUADRANTS={I:1,II:2,III:3,IV:4},s.get=function(n,t,e){return r(n[t])?n[t][e]:void 0},s.set=function(n,t,e,u){var o=s.clone(n);return r(o[t])||(o[t]=[]),o[t][e]=u,o},s.width=function(r){return s.widest(r).length},s.height=function(r){return s.tallest(r).length},s.dimensions=function(r){for(var n=0,t=0,e=0,u=r.length;u>e;e++){var o=r[e].length;o>0&&(n=e+1),o>t&&(t=o)}return[t,n]},s.area=function(r){var n=s.width(r),t=s.height(r);return n*t},s.cells=function(r){for(var n=0,t=0,e=r.length;e>t;t++)for(var u=r[t],a=0,i=u.length;i>a;a++){var f=u[a];o(f)&&n++}return n},s.crop=function(r,n,t,e,u){for(var o=[],a=s.width(r),i=s.height(r),f=0;u>f;f++){var h=n+f;if(i>h&&h>=0){o.push([]);for(var l=0;e>l;l++){var c=t+l;if(a>c&&c>=0){var v=o[o.length-1],g=r[h][c];v.push(g)}}}}return o},s.harvest=function(r,n,t,e,u){for(var o=[],a=s.width(r),i=s.height(r),f=0;u>f;f++){o[f]=[];for(var h=0;e>h;h++){var l=n+f,c=t+h;if(l>=i||0>l)o[f][h]=null;else if(c>=a||0>c)o[f][h]=null;else{var v=r[l][c];o[f][h]=v}}}return o},s.rotate=function(r,n){if(n===s.DIRECTIONS.LEFT)return s.lrotate(r);if(n===s.DIRECTIONS.RIGHT)return s.rrotate(r);throw"Array2D.js: Invalid direction provided for `rotate`"},s.lrotate=function(r){var n=s.transpose(r);return s.vflip(n)},s.rrotate=function(r){var n=s.transpose(r);return s.hflip(n)},s.flip=function(r,n){if(n===s.AXES.X)return s.vflip(r);if(n===s.AXES.Y)return s.hflip(r);throw"Array2D.js: Invalid axis provided for `flip`"},s.vflip=function(r){for(var n=[],t=0,e=r.length;e>t;t++){var u=t-e+1;n[t]=r[Math.abs(u)]}return n},s.hflip=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var u=r[t],o=0,a=u.length;a>o;o++){var i=o-a+1;n[t][o]=r[t][Math.abs(i)]}}return n},s.pan=function(r,n,t){switch(n){case s.DIRECTIONS.LEFT:return s.lpan(r,t);case s.DIRECTIONS.RIGHT:return s.rpan(r,t);case s.DIRECTIONS.UP:return s.upan(r,t);case s.DIRECTIONS.DOWN:return s.dpan(r,t);default:throw"Array2D.js: Invalid direction provided for `pan`"}},s.upan=function(r,n){var t=s.clone(r);for(n||(n=1);n>0;){var e=t.pop();t.unshift(e),n--}return t},s.lpan=function(r,n){var t=s.transpose(r),e=s.upan(t,n);return s.transpose(e)},s.dpan=function(r,n){var t=s.clone(r);for(n||(n=1);n>0;){var e=t.shift();t.push(e),n--}return t},s.rpan=function(r,n){var t=s.transpose(r),e=s.dpan(t,n);return s.transpose(e)},s.slide=function(r,n,t){switch(n){case s.DIRECTIONS.LEFT:return s.lslide(r,t);case s.DIRECTIONS.RIGHT:return s.rslide(r,t);case s.DIRECTIONS.UP:return s.uslide(r,t);case s.DIRECTIONS.DOWN:return s.dslide(r,t);default:throw"Array2D.js: Invalid direction provided for `slide`"}},s.rslide=function(r,n){return s.lpan(r,n)},s.lslide=function(r,n){return s.rpan(r,n)},s.dslide=function(r,n){return s.upan(r,n)},s.uslide=function(r,n){return s.dpan(r,n)},s.transpose=function(r){for(var n=[],t=0,e=r.length;e>t;t++)for(var u=r[t],o=0,a=u.length;a>o;o++)n[o]||(n[o]=[]),n[o][t]=u[o];return n},s.antitranspose=function(r){var n=s.rrotate(r);return s.vflip(n)},s.fill=function(r,n){for(var t=[],e=0,u=r.length;u>e;e++){var o=r[e];t[e]=[];for(var a=0,i=o.length;i>a;a++)t[e][a]=n}return t},s.fillArea=function(r,n,t,e,u,o){var a=s.build(e,u,o);return s.paste(r,a,n,t)},s.pad=function(r,n,t,e){switch(n){case s.EDGES.TOP:return s.upad(r,t,e);case s.EDGES.BOTTOM:return s.dpad(r,t,e);case s.EDGES.LEFT:return s.lpad(r,t,e);case s.EDGES.RIGHT:return s.rpad(r,t,e);default:throw"Array2D.js: Invalid side provided for `pad`"}},s.upad=function(r,n,e){for(var u=[],o=s.dimensions(r),a=o[0],i=o[1],f=-n;i>f;f++){var h=f+n;u[h]=[];for(var l=0;a>l;l++)u[h][l]=f>-1?r[f][l]:t(e)?null:e}return u},s.dpad=function(r,n,e){for(var u=[],o=s.dimensions(r),a=o[0],i=o[1],f=0;i+n>f;f++){u[f]=[];for(var h=0;a>h;h++)u[f][h]=i>f?r[f][h]:t(e)?null:e}return u},s.lpad=function(r,n,e){for(var u=[],o=s.dimensions(r),a=o[0],i=o[1],f=0;i>f;f++){u[f]=[];for(var h=-n;a>h;h++){var l=h+n;u[f][l]=h>-1?r[f][h]:t(e)?null:e}}return u},s.rpad=function(r,n,e){for(var u=[],o=s.dimensions(r),a=o[0],i=o[1],f=0;i>f;f++){u[f]=[];for(var h=0;a+n>h;h++)u[f][h]=a>h?r[f][h]:t(e)?null:e}return u},s.trim=function(r,n,t){switch(n){case s.EDGES.TOP:return s.utrim(r,t);case s.EDGES.BOTTOM:return s.dtrim(r,t);case s.EDGES.LEFT:return s.ltrim(r,t);case s.EDGES.RIGHT:return s.rtrim(r,t);default:throw"Array2D.js: Invalid edge provided for `trim`"}},s.utrim=function(r,n){var t=[];n||(n=1);for(var e=n,u=r.length;u>e;e++)t[e-n]=a(r[e]);return t},s.dtrim=function(r,n){var t=[];n||(n=1);for(var e=0,u=r.length-n;u>e;e++)t[e]=a(r[e]);return t},s.ltrim=function(r,n){var t=[];n||(n=1);for(var e=0,u=r.length;u>e;e++){t[e]=[];for(var o=r[e],a=n,i=o.length;i>a;a++)t[e][a-n]=o[a]}return t},s.rtrim=function(r,n){var t=[];n||(n=1);for(var e=0,u=r.length;u>e;e++){t[e]=[];for(var o=r[e],a=0,i=o.length-n;i>a;a++)t[e][a]=o[a]}return t},s.stitch=function(r,n,t){switch(t){case s.EDGES.TOP:return s.ustitch(r,n);case s.EDGES.BOTTOM:return s.dstitch(r,n);case s.EDGES.LEFT:return s.lstitch(r,n);case s.EDGES.RIGHT:return s.rstitch(r,n);default:throw"Array2D.js: Invalid edge provided for `stitch`"}},s.ustitch=function(r,n){var t=s.dimensions(n)[1];return s.glue(r,n,-t,0)},s.dstitch=function(r,n){var t=s.dimensions(r)[1];return s.glue(r,n,t,0)},s.lstitch=function(r,n){var t=s.dimensions(n)[0];return s.glue(r,n,0,-t)},s.rstitch=function(r,n){var t=s.dimensions(r)[0];return s.glue(r,n,0,t)},s.paste=function(n,e,u,o){for(var a=[],i=0,f=n.length;f>i;i++){a[i]=[];for(var h=n[i].length,l=i-u,s=0;h>s;s++){var c=s-o;a[i][s]=r(e[l])&&!t(e[l][c])&&i>=u&&s>=o&&f>l&&h>c?e[l][c]:n[i][s]}}return a},s.glue=function(r,n,t,e){var u=s.dimensions(r),o=s.dimensions(n),a=u[0]>o[0]?u[0]:o[0],i=u[1]>o[1]?u[1]:o[1],f=Math.abs(e)+a,h=Math.abs(t)+i,l=s.build(f,h),c=0>t?-t:0,v=0>e?-e:0,g=s.paste(l,r,c,v),d=t>0?t:0,p=e>0?e:0,E=s.paste(g,n,d,p);return E},s.shuffle=function(r){for(var n=[],t=0,e=r.length;e>t;t++)n.push(r[t].length);for(var u=s.flatten(r),t=u.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),a=u[t];u[t]=u[o],u[o]=a}for(var i=[],t=0,e=n.length;e>t;t++){for(var f=[],h=n[t];h--;)f.push(u.pop());i.push(f)}return i},s.tidy=function(r){for(var n=[],e=s.width(r),u=s.height(r),o=0,a=e;a>o;o++){n[o]=[];for(var i=0,f=u;f>i;i++){var h=s.get(r,o,i);n[o][i]=t(h)?null:h}}return n},s.clone=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var u=r[t],o=0,a=u.length;a>o;o++){var i=u[o];n[t][o]=i}}return n},s.build=function(r,n,e){var u=[];t(e)&&(e=null);for(var o=0,a=n;a>o;o++){u[o]=[];for(var i=0,f=r;f>i;i++)u[o][i]=e}return u},s.buildWith=function(r,n,t){for(var e=[],u=0,o=n;o>u;u++){e[u]=[];for(var a=0,i=r;i>a;a++)e[u][a]=t?t(u,a,e):null}return e},s.serialize=function(r){return JSON.stringify(r)},s.nullify=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var u=r[t],a=0,i=u.length;i>a;a++){var f=u[a];o(f)&&(n[t][a]=null)}}return n},s.integerize=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var u=r[t],o=0,a=u.length;a>o;o++){var i=u[o];n[t][o]=parseInt(i)}}return n},s.stringize=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var u=r[t],o=0,a=u.length;a>o;o++){var i=u[o];n[t][o]=String(i)}}return n},s.check=function(n){return r(n)&&r(n[0])?!0:!1},s.ragged=function(r){var n=s.widest(r),t=s.thinnest(r);return n.length!==t.length},s.rectangular=function(r){return!s.ragged(r)},s.empty=function(r){return r.length<1?!0:1===r.length&&r[0].length<1?!0:!1},s.blank=function(r){var n=!0,t=s.empty(r);if(t)return!0;for(var u=0,o=r.length;o>u;u++)for(var a=r[u],i=0,f=a.length;f>i;i++){var h=a[i];e(h)||(n=!1)}return n},s.singular=function(r){var n=s.width(r),t=s.height(r);return 1===n&&1===t},s.multitudinous=function(r){return!s.singular(r)},s.sparse=function(r){for(var n=!1,t=0,u=r.length;u>t;t++)for(var o=r[t],a=0,i=o.length;i>a;a++){var f=o[a];e(f)&&(n=!0)}return n},s.dense=function(r){return!s.sparse(r)},s.same=function(r,n){var t=s.width(r),e=s.height(r),u=s.width(n),o=s.height(n);if(t!==u)return!1;if(e!==o)return!1;for(var a=0;t>a;a++)for(var i=0;u>i;i++)if(r[a][i]!==n[a][i])return!1;return!0},s.different=function(r,n){return!s.same(r,n)},s.contains=function(r,n){for(var t=!1,e=0,u=r.length;u>e;e++)for(var o=r[e],a=0,i=o.length;i>a;a++){var f=o[a];f===n&&(t=!0)}return t},s.includes=function(n,t){var e=s.dimensions(n),u=s.dimensions(t),o=e[0],a=e[1],i=u[0],f=u[1];if(1>i)return!1;if(1>f)return!1;if(i>o)return!1;if(f>a)return!1;for(var h=t[0][0],l=[],c=0;c<n.length;c++)for(var v=0;v<n[c].length;v++){var g=n[c][v];g===h&&l.push([c,v])}var d=l.length;if(1>d)return!1;for(var p=0;d>p;p++){for(var E=l[p][0],T=l[p][1],R=!0,c=0;c<t.length;c++){var O=n[c+E],I=t[c];if(!r(O))break;if(!r(I))break;for(var v=0;v<t[c].length;v++){var g=O[v+T],m=I[v];g!==m&&(R=!1)}}if(R===!0)return!0}return!1},s.symmetrical=function(r,n){switch(n){case s.AXES.Y:return s.hsymmetrical(r);case s.AXES.X:return s.vsymmetrical(r);default:throw"Array2D.js: Invalid axis given for `symmetrical`"}},s.hsymmetrical=function(r){for(var n=0,t=r.length;t>n;n++)for(var e=r[n],u=0,o=e.length;o>u;u++){var a=e[u],i=e[o-1-u];if(a!==i)return!1}return!0},s.vsymmetrical=function(r){var n=s.transpose(r);return s.hsymmetrical(n)},s.eachCell=function(r,n){for(var t=0,e=r.length;e>t;t++)for(var u=r[t],o=0,a=u.length;a>o;o++){var i=u[o];n(i,t,o,r)}},s.nthCell=function(r,n,t,e){for(var u=0,o=0,a=r.length;a>o;o++)for(var i=r[o],f=0,h=i.length;h>f;f++){var l=i[f],s=u>=t,c=(u-t)%n===0;s&&c&&e(l,o,f,r),u+=1}},s.eachRow=function(r,n){for(var t=0,e=r.length;e>t;t++){var u=r[t];n(a(u),t,r)}},s.eachColumn=function(r,n){for(var t=s.transpose(r),e=0,u=t.length;u>e;e++){var o=t[e];n(a(o),e,r)}},s.forArea=function(r,n,t,e,u,o){for(var a=s.crop(r,n,t,e,u),i=0,f=a.length;f>i;i++)for(var h=a[i],l=0,c=h.length;c>l;l++){var v=h[l];o(v,i,l,r)}},s.forRow=function(r,n,t){for(var e=s.row(r,n),u=0,o=e.length;o>u;u++)t(e[u],n,u,r)},s.forColumn=function(r,n,t){for(var e=s.column(r,n),u=0,o=e.length;o>u;u++)t(e[u],u,n,r)},s.flatten=function(r){for(var n=[],t=0,e=r.length;e>t;t++)for(var u=r[t],o=0,a=u.length;a>o;o++)n.push(u[o]);return n},s.squash=function(r){var n=s.transpose(r);return s.flatten(n)},s.map=function(r,n){for(var t=[],e=0,u=r.length;u>e;e++){t[e]=[];for(var o=r[e],a=0,i=o.length;i>a;a++){var f,h=o[a];f=n?n(h,e,a,r):h,t[e][a]=f}}return t},s.reduce=function(r,n){for(var t=[],e=0,u=r.length;u>e;e++)t[e]=n(r[e],e,r);return t},s.boildown=function(r,n){var t=s.transpose(r);return s.reduce(t,n)},s.row=function(r,n){return a(r[n])},s.column=function(r,n){var t=s.transpose(r);return s.row(t,n)},s.top=function(r){return a(r[0])},s.bottom=function(r){return a(r[r.length-1])},s.left=function(r){s.transpose(r);return s.top(r)},s.right=function(r){s.transpose(r);return s.bottom(r)},s.widest=function(r){for(var n=r[0],t=0,e=r.length;e>t;t++){var u=r[t];u.length>n.length&&(n=u)}return a(n)},s.thinnest=function(r){for(var n=r[0],t=0,e=r.length;e>t;t++){var u=r[t];u.length<n.length&&(n=u)}return a(n)},s.tallest=function(r){var n=s.transpose(r);return s.widest(n)},s.shortest=function(r){var n=s.transpose(r);return s.thinnest(n)},s.setRow=function(r,n,t){for(var e=[],u=0,o=r.length;o>u;u++)e[u]=a(u===n?t:r[u]);return e},s.setColumn=function(r,n,t){for(var e=[],u=0,o=r.length;o>u;u++){var a=r[u];e[u]=[];for(var i=0,f=a.length;f>i;i++)e[u][i]=i===n?t[i]:a[i]}return e},s.fillRow=function(r,n,t){for(var e=[],u=0,o=r.length;o>u;u++){var a=r[u];e[u]=[];for(var i=0,f=a.length;f>i;i++)e[u][i]=u===n?t:a[i]}return e},s.fillColumn=function(r,n,t){for(var e=[],u=0,o=r.length;o>u;u++){var a=r[u];e[u]=[];for(var i=0,f=a.length;f>i;i++)e[u][i]=i===n?t:a[i]}return e},s.spliceRow=function(r,n,t){for(var e=[],u=0,o=r.length;o>u;u++)u===n&&e.push(t),e.push(r[u]);return e},s.spliceColumn=function(r,n,t){for(var e=[],u=0,o=r.length;o>u;u++){var a=r[u];e[u]=[];for(var i=0,f=a.length;f>i;i++)i===n&&e[u].push(t[i]),e[u].push(a[i])}return e},s.deleteRow=function(r,n){for(var t=[],e=0,u=r.length;u>e;e++)e!==n&&t.push(r[e]);return t},s.deleteColumn=function(r,n){for(var t=[],e=0,u=r.length;u>e;e++){var o=r[e];t[e]=[];for(var a=0,i=o.length;i>a;a++)a!==n&&t[e].push(o[a])}return t},s.exists=function(r,n,e){return!t(s.get(r,n,e))},s.occupied=function(r,n,t){return u(s.get(r,n,t))},s.inBounds=function(n,t,e){return 0>t||0>e?!1:r(n[t])?e>n[t].length-1?!1:!0:!1},s.copy=function(r,n,t,e,u){var o=s.get(r,n,t);return s.set(r,e,u,o)},s.move=function(r,n,t,e,u){var o=s.get(r,n,t),a=s.set(r,e,u,o);return s.set(a,n,t,null)},s.swap=function(r,n,t,e,u){var o=s.get(r,n,t),a=s.get(r,e,u),i=s.set(r,e,u,o);return s.set(i,n,t,a)},s.edge=function(r,n,t){if(0===n)return!0;if(0===t)return!0;var e=s.width(r),u=s.height(r);return n===u-1?!0:t===e-1?!0:!1},s.edges=function(r,n,t){var e=[];0===n&&e.push(s.EDGES.TOP),0===t&&e.push(s.EDGES.LEFT);var u=s.width(r),o=s.height(r);return n===o-1&&e.push(s.EDGES.BOTTOM),t===u-1&&e.push(s.EDGES.RIGHT),e},s.corner=function(r,n,t){if(0===n&&0===t)return!0;var e=s.width(r),u=s.height(r);return 0===n&&t===e-1?!0:n===u-1&&t===e-1?!0:n===u-1&&0===t?!0:!1},s.corners=function(r,n,t){var e=[];0===n&&0===t&&e.push(s.CORNERS.TOP_LEFT);var u=s.width(r),o=s.height(r);return 0===n&&t===u-1&&e.push(s.CORNERS.TOP_RIGHT),n===o-1&&t===u-1&&e.push(s.CORNERS.BOTTOM_RIGHT),n===o-1&&0===t&&e.push(s.CORNERS.BOTTOM_LEFT),e},s.boundary=function(r,n,t){if(0===n)return!0;if(0===t)return!0;var e=s.row(r,n),u=e.length-1;if(t===u)return!0;var o=s.column(r,t),a=o.length-1;return n===a?!0:!1},s.boundaries=function(r,n,t){var e=[];0===n&&e.push(s.BOUNDARIES.UPPER),0===t&&e.push(s.BOUNDARIES.LEFT);var u=s.row(r,n),o=u.length-1;t===o&&e.push(s.BOUNDARIES.RIGHT);var a=s.column(r,t),i=a.length-1;return n===i&&e.push(s.BOUNDARIES.LOWER),e},s.crook=function(r,n,t){if(0===n&&0===t)return!0;var e=s.row(r,n),u=e.length-1,o=s.column(r,t),a=o.length-1;return 0===n&&t===a?!0:n===u&&0===t?!0:n===u&&t===a?!0:!1},s.crooks=function(r,n,t){var e=[],u=s.row(r,n),o=u.length-1,a=s.column(r,t),i=a.length-1;return 0===n&&0===t&&e.push(s.CROOKS.UPPER_LEFT),0===n&&t===i&&e.push(s.CROOKS.LOWER_LEFt),n===o&&0===t&&e.push(s.CROOKS.UPPER_RIGHT),n===o&&t===i&&e.push(s.CROOKS.LOWER_RIGHT),e},s.center=function(r,n,t){var e=s.width(r),u=s.height(r);return e%2===0?!1:u%2===0?!1:Math.floor(u/2)!==n?!1:Math.floor(e/2)!==t?!1:!0},s.interior=function(r,n,t){if(0===n)return!1;if(0===t)return!1;var e=s.width(r),u=s.height(r);return 3>e?!1:3>u?!1:n>=u-1?!1:t>=e-1?!1:!0},s.quadrants=function(r,n,t){var e=[],u=s.width(r),o=s.height(r),a=Math.floor(u/2),i=Math.floor(o/2);return i>=n&&t>a&&e.push(s.QUADRANTS.I),i>=n&&a>=t&&e.push(s.QUADRANTS.II),n>i&&a>=t&&e.push(s.QUADRANTS.III),n>i&&t>a&&e.push(s.QUADRANTS.IV),e},s.orthogonals=function(r,n,t){var e=[];return e[0]=s.get(r,n-1,t),e[1]=s.get(r,n,t-1),e[2]=s.get(r,n,t+1),e[3]=s.get(r,n+1,t),e},s.diagonals=function(r,n,t){var e=[];return e[0]=s.get(r,n-1,t-1),e[1]=s.get(r,n-1,t+1),e[2]=s.get(r,n+1,t-1),e[3]=s.get(r,n+1,t+1),e},s.neighbors=function(r,n,t){var e=s.orthogonals(r,n,t),u=s.diagonals(r,n,t),o=[];return o[0]=u[0],o[1]=e[0],o[2]=u[1],o[3]=e[1],o[4]=e[2],o[5]=u[2],o[6]=e[3],o[7]=u[3],o},s.neighborhood=function(r,n,t){var e=s.get(r,n,t),u=s.neighbors(r,n,t);return[[u[0],u[1],u[2]],[u[3],e,u[4]],[u[5],u[6],u[7]]]},s.euclidean=function(r,n,t,e,u){return Math.sqrt(Math.pow(e-n,2)+Math.pow(u-t,2))},s.chebyshev=function(r,n,t,e,u){var o=Math.abs(e-n),a=Math.abs(u-t);return o>a?o:a},s.manhattan=function(r,n,t,e,u){return Math.abs(e-n)+Math.abs(u-t)},s.find=function(r,n){for(var t=[],e=0,u=r.length;u>e;e++)for(var o=r[e],a=0,i=o.length;i>a;a++){var f=o[a];n(f,e,a,r)&&t.push([e,a])}return t},s.contiguous=function(r,n,t){for(var e=[],u=[],o=s.dimensions(r),a=o[0],f=o[1],h=0;f>h;h++)for(var l=0;a>l;l++)i(r[h][l],h,l,r,a,f,e,u,n,t);return e},s.touching=function(r,n){return s.contiguous(r,n,!0)},s.fromArray=function(r,n,t){for(var e=[],u=0;n>u;u++){e[u]=[];for(var o=0;t>o;o++)e[u][o]=r[u*t+o]}return e},s.fromCanvas=function(r){for(var n=r.getContext("2d"),t=n.getImageData(0,0,r.width,r.width),e=t.width,u=t.height,o=t.data,a=[],i=0,f=o.length;f>i;i+=4){var h=o[i],l=o[i+1],c=o[i+2],v=o[i+3],g=[h,l,c,v];a.push(g)}return s.fromArray(a,u,e)},s.toCanvas=function(r,n,t){for(var e,u=n.getContext("2d"),o=n.width,a=n.height,i=u.createImageData(o,a),f=i.data,h=0,l=r.length;l>h;h++)for(var s=r[h],c=0,v=s.length;v>c;c++){var g=s[c];e=t?t(g,h,c,r):g;var d=4*(h*o+c);f[d+0]=e[0],f[d+1]=e[1],f[d+2]=e[2],f[d+3]=e[3]}u.putImageData(i,0,0)}}).call(this);