// Array2D.js 0.0.2
// Copyright (c) 2014 Matthew Trost
// Array2D.js may be freely distributed under the MIT license.
(function(){function r(r){return"[object Array]"===Object.prototype.toString.call(r)}function n(r){return null===r}function t(r){return void 0===r}function e(r){return n(r)||t(r)}function o(r){return!e(r)}function u(r){return!t(r)}function a(r){for(var n=[],t=0,e=r.length;e>t;t++)n[t]=r[t];return n}var i=this,f=i.Array2D,h=function(){return this instanceof h?void 0:new h};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.Array2D=h):i.Array2D=h,h.VERSION="0.0.1",h.noConflict=function(){return i.Array2D=f,this},h.AXES={X:1,Y:2},h.BEARINGS={NORTH:1,NORTHWEST:2,NORTHEAST:3,SOUTH:4,SOUTHWEST:5,SOUTHEAST:6,EAST:7,WEST:8},h.BOUNDARIES={UPPER:1,LOWER:2,LEFT:3,RIGHT:4},h.CORNERS={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_LEFT:3,BOTTOM_RIGHT:4},h.CROOKS={UPPER_LEFT:1,UPPER_RIGHT:2,LOWER_LEFT:3,LOWER_RIGHT:4},h.DIRECTIONS={UP:1,DOWN:2,LEFT:3,RIGHT:4},h.EDGES={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4},h.QUADRANTS={I:1,II:2,III:3,IV:4},h.get=function(n,t,e){return r(n[t])?n[t][e]:void 0},h.set=function(n,t,e,o){var u=h.clone(n);return r(u[t])||(u[t]=[]),u[t][e]=o,u},h.width=function(r){return h.widest(r).length},h.height=function(r){return h.tallest(r).length},h.dimensions=function(r){for(var n=0,t=0,e=0,o=r.length;o>e;e++){var u=r[e].length;u>0&&(n=e+1),u>t&&(t=u)}return[t,n]},h.area=function(r){var n=h.width(r),t=h.height(r);return n*t},h.cells=function(r){for(var n=0,t=0,e=r.length;e>t;t++)for(var o=r[t],a=0,i=o.length;i>a;a++){var f=o[a];u(f)&&n++}return n},h.clone=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var o=r[t],u=0,a=o.length;a>u;u++){var i=o[u];n[t][u]=i}}return n},h.build=function(r,n,e){var o=[];t(e)&&(e=null);for(var u=0,a=n;a>u;u++){o[u]=[];for(var i=0,f=r;f>i;i++)o[u][i]=e}return o},h.buildWith=function(r,n,t){for(var e=[],o=0,u=n;u>o;o++){e[o]=[];for(var a=0,i=r;i>a;a++)e[o][a]=t?t(o,a,e):null}return e},h.serialize=function(r){return JSON.stringify(r)},h.nullify=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var o=r[t],a=0,i=o.length;i>a;a++){var f=o[a];u(f)&&(n[t][a]=null)}}return n},h.check=function(n){return r(n)&&r(n[0])?!0:!1},h.ragged=function(r){var n=h.widest(r),t=h.thinnest(r);return n.length!==t.length},h.rectangular=function(r){return!h.ragged(r)},h.singular=function(r){var n=h.width(r),t=h.height(r);return 1===n&&1===t},h.multitudinous=function(r){return!h.singular(r)},h.sparse=function(r){for(var n=!1,t=0,o=r.length;o>t;t++)for(var u=r[t],a=0,i=u.length;i>a;a++){var f=u[a];e(f)&&(n=!0)}return n},h.dense=function(r){return!h.sparse(r)},h.integerize=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var o=r[t],u=0,a=o.length;a>u;u++){var i=o[u];n[t][u]=parseInt(i)}}return n},h.stringize=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var o=r[t],u=0,a=o.length;a>u;u++){var i=o[u];n[t][u]=String(i)}}return n},h.tidy=function(r){for(var n=[],e=h.width(r),o=h.height(r),u=0,a=e;a>u;u++){n[u]=[];for(var i=0,f=o;f>i;i++){var s=h.get(r,u,i);n[u][i]=t(s)?null:s}}return n},h.same=function(r,n){var t=h.width(r),e=h.height(r),o=h.width(n),u=h.height(n);if(t!==o)return!1;if(e!==u)return!1;for(var a=0;t>a;a++)for(var i=0;o>i;i++)if(r[a][i]!==n[a][i])return!1;return!0},h.different=function(r,n){return!h.same(r,n)},h.empty=function(r){return r.length<1?!0:1===r.length&&r[0].length<1?!0:!1},h.blank=function(r){var n=!0,t=h.empty(r);if(t)return!0;for(var o=0,u=r.length;u>o;o++)for(var a=r[o],i=0,f=a.length;f>i;i++){var s=a[i];e(s)||(n=!1)}return n},h.contains=function(r,n){for(var t=!1,e=0,o=r.length;o>e;e++)for(var u=r[e],a=0,i=u.length;i>a;a++){var f=u[a];f===n&&(t=!0)}return t},h.eachCell=function(r,n){for(var t=0,e=r.length;e>t;t++)for(var o=r[t],u=0,a=o.length;a>u;u++){var i=o[u];n(i,t,u,r)}},h.eachRow=function(r,n){for(var t=0,e=r.length;e>t;t++){var o=r[t];n(a(o),t,r)}},h.eachColumn=function(r,n){var t=h.transpose(r);h.eachRow(t,n)},h.crop=function(r,n,t,e,o){for(var u=[],a=h.width(r),i=h.height(r),f=0;o>f;f++){var s=n+f;if(i>s&&s>=0){u.push([]);for(var l=0;e>l;l++){var c=t+l;if(a>c&&c>=0){var v=u[u.length-1],g=r[s][c];v.push(g)}}}}return u},h.harvest=function(r,n,t,e,o){for(var u=[],a=h.width(r),i=h.height(r),f=0;o>f;f++){u[f]=[];for(var s=0;e>s;s++){var l=n+f,c=t+s;if(l>=i||0>l)u[f][s]=null;else if(c>=a||0>c)u[f][s]=null;else{var v=r[l][c];u[f][s]=v}}}return u},h.row=function(r,n){return a(r[n])},h.column=function(r,n){var t=h.transpose(r);return h.row(t,n)},h.top=function(r){return a(r[0])},h.bottom=function(r){return a(r[r.length-1])},h.left=function(r){h.transpose(r);return h.top(r)},h.right=function(r){h.transpose(r);return h.bottom(r)},h.widest=function(r){for(var n=r[0],t=0,e=r.length;e>t;t++){var o=r[t];o.length>n.length&&(n=o)}return a(n)},h.thinnest=function(r){for(var n=r[0],t=0,e=r.length;e>t;t++){var o=r[t];o.length<n.length&&(n=o)}return a(n)},h.tallest=function(r){var n=h.transpose(r);return h.widest(n)},h.shortest=function(r){var n=h.transpose(r);return h.thinnest(n)},h.exists=function(r,n,e){return!t(h.get(r,n,e))},h.occupied=function(r,n,t){return o(h.get(r,n,t))},h.edge=function(r,n,t){if(0===n)return!0;if(0===t)return!0;var e=h.width(r),o=h.height(r);return n===o-1?!0:t===e-1?!0:!1},h.corner=function(r,n,t){if(0===n&&0===t)return!0;var e=h.width(r),o=h.height(r);return 0===n&&t===e-1?!0:n===o-1&&t===e-1?!0:n===o-1&&0===t?!0:!1},h.edges=function(r,n,t){var e=[];0===n&&e.push(h.EDGES.TOP),0===t&&e.push(h.EDGES.LEFT);var o=h.width(r),u=h.height(r);return n===u-1&&e.push(h.EDGES.BOTTOM),t===o-1&&e.push(h.EDGES.RIGHT),e},h.corners=function(r,n,t){var e=[];0===n&&0===t&&e.push(h.CORNERS.TOP_LEFT);var o=h.width(r),u=h.height(r);return 0===n&&t===o-1&&e.push(h.CORNERS.TOP_RIGHT),n===u-1&&t===o-1&&e.push(h.CORNERS.BOTTOM_RIGHT),n===u-1&&0===t&&e.push(h.CORNERS.BOTTOM_LEFT),e},h.boundary=function(r,n,t){if(0===n)return!0;if(0===t)return!0;var e=h.row(r,n),o=e.length-1;if(t===o)return!0;var u=h.column(r,t),a=u.length-1;return n===a?!0:!1},h.boundaries=function(r,n,t){var e=[];0===n&&e.push(h.BOUNDARIES.UPPER),0===t&&e.push(h.BOUNDARIES.LEFT);var o=h.row(r,n),u=o.length-1;t===u&&e.push(h.BOUNDARIES.RIGHT);var a=h.column(r,t),i=a.length-1;return n===i&&e.push(h.BOUNDARIES.LOWER),e},h.crook=function(r,n,t){if(0===n&&0===t)return!0;var e=h.row(r,n),o=e.length-1,u=h.column(r,t),a=u.length-1;return 0===n&&t===a?!0:n===o&&0===t?!0:n===o&&t===a?!0:!1},h.crooks=function(r,n,t){var e=[],o=h.row(r,n),u=o.length-1,a=h.column(r,t),i=a.length-1;return 0===n&&0===t&&e.push(h.CROOKS.UPPER_LEFT),0===n&&t===i&&e.push(h.CROOKS.LOWER_LEFt),n===u&&0===t&&e.push(h.CROOKS.UPPER_RIGHT),n===u&&t===i&&e.push(h.CROOKS.LOWER_RIGHT),e},h.center=function(r,n,t){var e=h.width(r),o=h.height(r);return e%2===0?!1:o%2===0?!1:Math.floor(o/2)!==n?!1:Math.floor(e/2)!==t?!1:!0},h.interior=function(r,n,t){if(0===n)return!1;if(0===t)return!1;var e=h.width(r),o=h.height(r);return 3>e?!1:3>o?!1:n>=o-1?!1:t>=e-1?!1:!0},h.quadrants=function(r,n,t){var e=[],o=h.width(r),u=h.height(r),a=Math.floor(o/2),i=Math.floor(u/2);return i>=n&&t>a&&e.push(h.QUADRANTS.I),i>=n&&a>=t&&e.push(h.QUADRANTS.II),n>i&&a>=t&&e.push(h.QUADRANTS.III),n>i&&t>a&&e.push(h.QUADRANTS.IV),e},h.orthogonals=function(r,n,t){var e=[];return e[0]=h.get(r,n-1,t),e[1]=h.get(r,n,t-1),e[2]=h.get(r,n,t+1),e[3]=h.get(r,n+1,t),e},h.diagonals=function(r,n,t){var e=[];return e[0]=h.get(r,n-1,t-1),e[1]=h.get(r,n-1,t+1),e[2]=h.get(r,n+1,t-1),e[3]=h.get(r,n+1,t+1),e},h.neighbors=function(r,n,t){var e=h.orthogonals(r,n,t),o=h.diagonals(r,n,t),u=[];return u[0]=o[0],u[1]=e[0],u[2]=o[1],u[3]=e[1],u[4]=e[2],u[5]=o[2],u[6]=e[3],u[7]=o[3],u},h.neighborhood=function(r,n,t){var e=h.get(r,n,t),o=h.neighbors(r,n,t);return[[o[0],o[1],o[2]],[o[3],e,o[4]],[o[5],o[6],o[7]]]},h.copy=function(r,n,t,e,o){var u=h.get(r,n,t);return h.set(r,e,o,u)},h.move=function(r,n,t,e,o){var u=h.get(r,n,t),a=h.set(r,e,o,u);return h.set(a,n,t,null)},h.swap=function(r,n,t,e,o){var u=h.get(r,n,t),a=h.get(r,e,o),i=h.set(r,e,o,u);return h.set(i,n,t,a)},h.euclidean=function(r,n,t,e,o){return Math.sqrt(Math.pow(e-n,2)+Math.pow(o-t,2))},h.chebyshev=function(r,n,t,e,o){var u=Math.abs(e-n),a=Math.abs(o-t);return u>a?u:a},h.manhattan=function(r,n,t,e,o){return Math.abs(e-n)+Math.abs(o-t)},h.map=function(r,n){for(var t=[],e=0,o=r.length;o>e;e++){t[e]=[];for(var u=r[e],a=0,i=u.length;i>a;a++){var f,h=u[a];f=n?n(h,e,a,r):h,t[e][a]=f}}return t},h.rotate=function(r,n){if(n===h.DIRECTIONS.LEFT)return h.lrotate(r);if(n===h.DIRECTIONS.RIGHT)return h.rrotate(r);throw"Array2D.js: Invalid direction provided for `rotate`"},h.lrotate=function(r){var n=h.transpose(r);return h.vflip(n)},h.rrotate=function(r){var n=h.transpose(r);return h.hflip(n)},h.flip=function(r,n){if(n===h.AXES.X)return h.vflip(r);if(n===h.AXES.Y)return h.hflip(r);throw"Array2D.js: Invalid axis provided for `flip`"},h.vflip=function(r){for(var n=[],t=0,e=r.length;e>t;t++){var o=t-e+1;n[t]=r[Math.abs(o)]}return n},h.hflip=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var o=r[t],u=0,a=o.length;a>u;u++){var i=u-a+1;n[t][u]=r[t][Math.abs(i)]}}return n},h.pan=function(r,n,t){switch(n){case h.DIRECTIONS.LEFT:return h.lpan(r,t);case h.DIRECTIONS.RIGHT:return h.rpan(r,t);case h.DIRECTIONS.UP:return h.upan(r,t);case h.DIRECTIONS.DOWN:return h.dpan(r,t);default:throw"Array2D.js: Invalid direction provided for `pan`"}},h.upan=function(r,n){var t=h.clone(r);for(n||(n=1);n>0;){var e=t.pop();t.unshift(e),n--}return t},h.lpan=function(r,n){var t=h.transpose(r),e=h.upan(t,n);return h.transpose(e)},h.dpan=function(r,n){var t=h.clone(r);for(n||(n=1);n>0;){var e=t.shift();t.push(e),n--}return t},h.rpan=function(r,n){var t=h.transpose(r),e=h.dpan(t,n);return h.transpose(e)},h.slide=function(r,n,t){switch(n){case h.DIRECTIONS.LEFT:return h.lslide(r,t);case h.DIRECTIONS.RIGHT:return h.rslide(r,t);case h.DIRECTIONS.UP:return h.uslide(r,t);case h.DIRECTIONS.DOWN:return h.dslide(r,t);default:throw"Array2D.js: Invalid direction provided for `slide`"}},h.rslide=function(r,n){return h.lpan(r,n)},h.lslide=function(r,n){return h.rpan(r,n)},h.dslide=function(r,n){return h.upan(r,n)},h.uslide=function(r,n){return h.dpan(r,n)},h.transpose=function(r){for(var n=[],t=0,e=r.length;e>t;t++)for(var o=r[t],u=0,a=o.length;a>u;u++)n[u]||(n[u]=[]),n[u][t]=o[u];return n},h.antitranspose=function(r){var n=h.rrotate(r);return h.vflip(n)},h.pad=function(){throw"Array2D.js: Not yet implemented"},h.trim=function(){throw"Array2D.js: Not yet implemented"},h.paste=function(n,e,o,u){for(var a=[],i=0,f=n.length;f>i;i++){a[i]=[];for(var h=n[i].length,s=i-o,l=0;h>l;l++){var c=l-u;a[i][l]=r(e[s])&&!t(e[s][c])&&i>=o&&l>=u&&f>s&&h>c?e[s][c]:n[i][l]}}return a},h.glue=function(r,n,t,e){var o=h.dimensions(r),u=h.dimensions(n),a=o[0]>u[0]?o[0]:u[0],i=o[1]>u[1]?o[1]:u[1],f=Math.abs(e)+a,s=Math.abs(t)+i,l=h.build(f,s),c=0>t?-t:0,v=0>e?-e:0,g=h.paste(l,r,c,v),p=t>0?t:0,d=e>0?t:0,T=h.paste(g,n,p,d);return T},h.stitch=function(){throw"Array2D.js: Not yet implemented"},h.shuffle=function(r){for(var n=[],t=0,e=r.length;e>t;t++)n.push(r[t].length);for(var o=h.flatten(r),t=o.length-1;t>0;t--){var u=Math.floor(Math.random()*(t+1)),a=o[t];o[t]=o[u],o[u]=a}for(var i=[],t=0,e=n.length;e>t;t++){for(var f=[],s=n[t];s--;)f.push(o.pop());i.push(f)}return i},h.flatten=function(r){for(var n=[],t=0,e=r.length;e>t;t++)for(var o=r[t],u=0,a=o.length;a>u;u++)n.push(o[u]);return n},h.squash=function(r){var n=h.transpose(r);return h.flatten(n)},h.reduce=function(r,n){for(var t=[],e=0,o=r.length;o>e;e++)t[e]=n(r[e],e,r);return t},h.boildown=function(r,n){var t=h.transpose(r);return h.reduce(t,n)},h.symmetrical=function(){throw"Array2D.js: Not yet implemented"},h.includes=function(){throw"Array2D.js: Not yet implemented"},h.fromCanvas=function(r){for(var n=r.getContext("2d"),t=n.getImageData(0,0,r.width,r.width),e=t.width,o=t.height,u=t.data,a=[],i=0,f=u.length;f>i;i+=4){var s=u[i],l=u[i+1],c=u[i+2],v=u[i+3],g=[s,l,c,v];a.push(g)}return h.fromArray(a,o,e)},h.toCanvas=function(r,n,t){for(var e,o=n.getContext("2d"),u=n.width,a=n.height,i=o.createImageData(u,a),f=i.data,h=0,s=r.length;s>h;h++)for(var l=r[h],c=0,v=l.length;v>c;c++){var g=l[c];e=t?t(g,h,c,r):g;var p=4*(h*u+c);f[p+0]=e[0],f[p+1]=e[1],f[p+2]=e[2],f[p+3]=e[3]}o.putImageData(i,0,0)},h.fromArray=function(r,n,t){for(var e=[],o=0;n>o;o++){e[o]=[];for(var u=0;t>u;u++)e[o][u]=r[o*t+u]}return e}}).call(this);