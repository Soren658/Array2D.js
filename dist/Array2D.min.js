// Array2D.js 0.0.3
// Copyright (c) 2014 Matthew Trost
// Array2D.js may be freely distributed under the MIT license.
(function(){function r(r){return"[object Array]"===Object.prototype.toString.call(r)}function n(r){return null===r}function t(r){return void 0===r}function e(r){return n(r)||t(r)}function u(r){return!e(r)}function o(r){return!t(r)}function a(r){for(var n=[],t=0,e=r.length;e>t;t++)n[t]=r[t];return n}var i=this,f=i.Array2D,h=function(){return this instanceof h?void 0:new h};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.Array2D=h):i.Array2D=h,h.VERSION="0.0.2",h.noConflict=function(){return i.Array2D=f,this},h.AXES={X:1,Y:2},h.BEARINGS={NORTH:1,NORTHWEST:2,NORTHEAST:3,SOUTH:4,SOUTHWEST:5,SOUTHEAST:6,EAST:7,WEST:8},h.BOUNDARIES={UPPER:1,LOWER:2,LEFT:3,RIGHT:4},h.CORNERS={TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_LEFT:3,BOTTOM_RIGHT:4},h.CROOKS={UPPER_LEFT:1,UPPER_RIGHT:2,LOWER_LEFT:3,LOWER_RIGHT:4},h.DIRECTIONS={UP:1,DOWN:2,LEFT:3,RIGHT:4},h.EDGES={TOP:1,BOTTOM:2,LEFT:3,RIGHT:4},h.QUADRANTS={I:1,II:2,III:3,IV:4},h.get=function(n,t,e){return r(n[t])?n[t][e]:void 0},h.set=function(n,t,e,u){var o=h.clone(n);return r(o[t])||(o[t]=[]),o[t][e]=u,o},h.width=function(r){return h.widest(r).length},h.height=function(r){return h.tallest(r).length},h.dimensions=function(r){for(var n=0,t=0,e=0,u=r.length;u>e;e++){var o=r[e].length;o>0&&(n=e+1),o>t&&(t=o)}return[t,n]},h.area=function(r){var n=h.width(r),t=h.height(r);return n*t},h.cells=function(r){for(var n=0,t=0,e=r.length;e>t;t++)for(var u=r[t],a=0,i=u.length;i>a;a++){var f=u[a];o(f)&&n++}return n},h.clone=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var u=r[t],o=0,a=u.length;a>o;o++){var i=u[o];n[t][o]=i}}return n},h.build=function(r,n,e){var u=[];t(e)&&(e=null);for(var o=0,a=n;a>o;o++){u[o]=[];for(var i=0,f=r;f>i;i++)u[o][i]=e}return u},h.buildWith=function(r,n,t){for(var e=[],u=0,o=n;o>u;u++){e[u]=[];for(var a=0,i=r;i>a;a++)e[u][a]=t?t(u,a,e):null}return e},h.serialize=function(r){return JSON.stringify(r)},h.nullify=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var u=r[t],a=0,i=u.length;i>a;a++){var f=u[a];o(f)&&(n[t][a]=null)}}return n},h.check=function(n){return r(n)&&r(n[0])?!0:!1},h.ragged=function(r){var n=h.widest(r),t=h.thinnest(r);return n.length!==t.length},h.rectangular=function(r){return!h.ragged(r)},h.singular=function(r){var n=h.width(r),t=h.height(r);return 1===n&&1===t},h.multitudinous=function(r){return!h.singular(r)},h.sparse=function(r){for(var n=!1,t=0,u=r.length;u>t;t++)for(var o=r[t],a=0,i=o.length;i>a;a++){var f=o[a];e(f)&&(n=!0)}return n},h.dense=function(r){return!h.sparse(r)},h.integerize=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var u=r[t],o=0,a=u.length;a>o;o++){var i=u[o];n[t][o]=parseInt(i)}}return n},h.stringize=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var u=r[t],o=0,a=u.length;a>o;o++){var i=u[o];n[t][o]=String(i)}}return n},h.tidy=function(r){for(var n=[],e=h.width(r),u=h.height(r),o=0,a=e;a>o;o++){n[o]=[];for(var i=0,f=u;f>i;i++){var s=h.get(r,o,i);n[o][i]=t(s)?null:s}}return n},h.same=function(r,n){var t=h.width(r),e=h.height(r),u=h.width(n),o=h.height(n);if(t!==u)return!1;if(e!==o)return!1;for(var a=0;t>a;a++)for(var i=0;u>i;i++)if(r[a][i]!==n[a][i])return!1;return!0},h.different=function(r,n){return!h.same(r,n)},h.empty=function(r){return r.length<1?!0:1===r.length&&r[0].length<1?!0:!1},h.blank=function(r){var n=!0,t=h.empty(r);if(t)return!0;for(var u=0,o=r.length;o>u;u++)for(var a=r[u],i=0,f=a.length;f>i;i++){var s=a[i];e(s)||(n=!1)}return n},h.contains=function(r,n){for(var t=!1,e=0,u=r.length;u>e;e++)for(var o=r[e],a=0,i=o.length;i>a;a++){var f=o[a];f===n&&(t=!0)}return t},h.eachCell=function(r,n){for(var t=0,e=r.length;e>t;t++)for(var u=r[t],o=0,a=u.length;a>o;o++){var i=u[o];n(i,t,o,r)}},h.eachRow=function(r,n){for(var t=0,e=r.length;e>t;t++){var u=r[t];n(a(u),t,r)}},h.eachColumn=function(r,n){var t=h.transpose(r);h.eachRow(t,n)},h.crop=function(r,n,t,e,u){for(var o=[],a=h.width(r),i=h.height(r),f=0;u>f;f++){var s=n+f;if(i>s&&s>=0){o.push([]);for(var c=0;e>c;c++){var l=t+c;if(a>l&&l>=0){var v=o[o.length-1],g=r[s][l];v.push(g)}}}}return o},h.harvest=function(r,n,t,e,u){for(var o=[],a=h.width(r),i=h.height(r),f=0;u>f;f++){o[f]=[];for(var s=0;e>s;s++){var c=n+f,l=t+s;if(c>=i||0>c)o[f][s]=null;else if(l>=a||0>l)o[f][s]=null;else{var v=r[c][l];o[f][s]=v}}}return o},h.row=function(r,n){return a(r[n])},h.column=function(r,n){var t=h.transpose(r);return h.row(t,n)},h.top=function(r){return a(r[0])},h.bottom=function(r){return a(r[r.length-1])},h.left=function(r){h.transpose(r);return h.top(r)},h.right=function(r){h.transpose(r);return h.bottom(r)},h.widest=function(r){for(var n=r[0],t=0,e=r.length;e>t;t++){var u=r[t];u.length>n.length&&(n=u)}return a(n)},h.thinnest=function(r){for(var n=r[0],t=0,e=r.length;e>t;t++){var u=r[t];u.length<n.length&&(n=u)}return a(n)},h.tallest=function(r){var n=h.transpose(r);return h.widest(n)},h.shortest=function(r){var n=h.transpose(r);return h.thinnest(n)},h.exists=function(r,n,e){return!t(h.get(r,n,e))},h.occupied=function(r,n,t){return u(h.get(r,n,t))},h.edge=function(r,n,t){if(0===n)return!0;if(0===t)return!0;var e=h.width(r),u=h.height(r);return n===u-1?!0:t===e-1?!0:!1},h.corner=function(r,n,t){if(0===n&&0===t)return!0;var e=h.width(r),u=h.height(r);return 0===n&&t===e-1?!0:n===u-1&&t===e-1?!0:n===u-1&&0===t?!0:!1},h.edges=function(r,n,t){var e=[];0===n&&e.push(h.EDGES.TOP),0===t&&e.push(h.EDGES.LEFT);var u=h.width(r),o=h.height(r);return n===o-1&&e.push(h.EDGES.BOTTOM),t===u-1&&e.push(h.EDGES.RIGHT),e},h.corners=function(r,n,t){var e=[];0===n&&0===t&&e.push(h.CORNERS.TOP_LEFT);var u=h.width(r),o=h.height(r);return 0===n&&t===u-1&&e.push(h.CORNERS.TOP_RIGHT),n===o-1&&t===u-1&&e.push(h.CORNERS.BOTTOM_RIGHT),n===o-1&&0===t&&e.push(h.CORNERS.BOTTOM_LEFT),e},h.boundary=function(r,n,t){if(0===n)return!0;if(0===t)return!0;var e=h.row(r,n),u=e.length-1;if(t===u)return!0;var o=h.column(r,t),a=o.length-1;return n===a?!0:!1},h.boundaries=function(r,n,t){var e=[];0===n&&e.push(h.BOUNDARIES.UPPER),0===t&&e.push(h.BOUNDARIES.LEFT);var u=h.row(r,n),o=u.length-1;t===o&&e.push(h.BOUNDARIES.RIGHT);var a=h.column(r,t),i=a.length-1;return n===i&&e.push(h.BOUNDARIES.LOWER),e},h.crook=function(r,n,t){if(0===n&&0===t)return!0;var e=h.row(r,n),u=e.length-1,o=h.column(r,t),a=o.length-1;return 0===n&&t===a?!0:n===u&&0===t?!0:n===u&&t===a?!0:!1},h.crooks=function(r,n,t){var e=[],u=h.row(r,n),o=u.length-1,a=h.column(r,t),i=a.length-1;return 0===n&&0===t&&e.push(h.CROOKS.UPPER_LEFT),0===n&&t===i&&e.push(h.CROOKS.LOWER_LEFt),n===o&&0===t&&e.push(h.CROOKS.UPPER_RIGHT),n===o&&t===i&&e.push(h.CROOKS.LOWER_RIGHT),e},h.center=function(r,n,t){var e=h.width(r),u=h.height(r);return e%2===0?!1:u%2===0?!1:Math.floor(u/2)!==n?!1:Math.floor(e/2)!==t?!1:!0},h.interior=function(r,n,t){if(0===n)return!1;if(0===t)return!1;var e=h.width(r),u=h.height(r);return 3>e?!1:3>u?!1:n>=u-1?!1:t>=e-1?!1:!0},h.quadrants=function(r,n,t){var e=[],u=h.width(r),o=h.height(r),a=Math.floor(u/2),i=Math.floor(o/2);return i>=n&&t>a&&e.push(h.QUADRANTS.I),i>=n&&a>=t&&e.push(h.QUADRANTS.II),n>i&&a>=t&&e.push(h.QUADRANTS.III),n>i&&t>a&&e.push(h.QUADRANTS.IV),e},h.orthogonals=function(r,n,t){var e=[];return e[0]=h.get(r,n-1,t),e[1]=h.get(r,n,t-1),e[2]=h.get(r,n,t+1),e[3]=h.get(r,n+1,t),e},h.diagonals=function(r,n,t){var e=[];return e[0]=h.get(r,n-1,t-1),e[1]=h.get(r,n-1,t+1),e[2]=h.get(r,n+1,t-1),e[3]=h.get(r,n+1,t+1),e},h.neighbors=function(r,n,t){var e=h.orthogonals(r,n,t),u=h.diagonals(r,n,t),o=[];return o[0]=u[0],o[1]=e[0],o[2]=u[1],o[3]=e[1],o[4]=e[2],o[5]=u[2],o[6]=e[3],o[7]=u[3],o},h.neighborhood=function(r,n,t){var e=h.get(r,n,t),u=h.neighbors(r,n,t);return[[u[0],u[1],u[2]],[u[3],e,u[4]],[u[5],u[6],u[7]]]},h.copy=function(r,n,t,e,u){var o=h.get(r,n,t);return h.set(r,e,u,o)},h.move=function(r,n,t,e,u){var o=h.get(r,n,t),a=h.set(r,e,u,o);return h.set(a,n,t,null)},h.swap=function(r,n,t,e,u){var o=h.get(r,n,t),a=h.get(r,e,u),i=h.set(r,e,u,o);return h.set(i,n,t,a)},h.euclidean=function(r,n,t,e,u){return Math.sqrt(Math.pow(e-n,2)+Math.pow(u-t,2))},h.chebyshev=function(r,n,t,e,u){var o=Math.abs(e-n),a=Math.abs(u-t);return o>a?o:a},h.manhattan=function(r,n,t,e,u){return Math.abs(e-n)+Math.abs(u-t)},h.map=function(r,n){for(var t=[],e=0,u=r.length;u>e;e++){t[e]=[];for(var o=r[e],a=0,i=o.length;i>a;a++){var f,h=o[a];f=n?n(h,e,a,r):h,t[e][a]=f}}return t},h.find=function(){throw"Not yet implemented!"},h.contiguous=function(){throw"Not yet implemented!"},h.touching=function(){throw"Not yet implemented!"},h.rotate=function(r,n){if(n===h.DIRECTIONS.LEFT)return h.lrotate(r);if(n===h.DIRECTIONS.RIGHT)return h.rrotate(r);throw"Array2D.js: Invalid direction provided for `rotate`"},h.lrotate=function(r){var n=h.transpose(r);return h.vflip(n)},h.rrotate=function(r){var n=h.transpose(r);return h.hflip(n)},h.flip=function(r,n){if(n===h.AXES.X)return h.vflip(r);if(n===h.AXES.Y)return h.hflip(r);throw"Array2D.js: Invalid axis provided for `flip`"},h.vflip=function(r){for(var n=[],t=0,e=r.length;e>t;t++){var u=t-e+1;n[t]=r[Math.abs(u)]}return n},h.hflip=function(r){for(var n=[],t=0,e=r.length;e>t;t++){n[t]=[];for(var u=r[t],o=0,a=u.length;a>o;o++){var i=o-a+1;n[t][o]=r[t][Math.abs(i)]}}return n},h.pan=function(r,n,t){switch(n){case h.DIRECTIONS.LEFT:return h.lpan(r,t);case h.DIRECTIONS.RIGHT:return h.rpan(r,t);case h.DIRECTIONS.UP:return h.upan(r,t);case h.DIRECTIONS.DOWN:return h.dpan(r,t);default:throw"Array2D.js: Invalid direction provided for `pan`"}},h.upan=function(r,n){var t=h.clone(r);for(n||(n=1);n>0;){var e=t.pop();t.unshift(e),n--}return t},h.lpan=function(r,n){var t=h.transpose(r),e=h.upan(t,n);return h.transpose(e)},h.dpan=function(r,n){var t=h.clone(r);for(n||(n=1);n>0;){var e=t.shift();t.push(e),n--}return t},h.rpan=function(r,n){var t=h.transpose(r),e=h.dpan(t,n);return h.transpose(e)},h.slide=function(r,n,t){switch(n){case h.DIRECTIONS.LEFT:return h.lslide(r,t);case h.DIRECTIONS.RIGHT:return h.rslide(r,t);case h.DIRECTIONS.UP:return h.uslide(r,t);case h.DIRECTIONS.DOWN:return h.dslide(r,t);default:throw"Array2D.js: Invalid direction provided for `slide`"}},h.rslide=function(r,n){return h.lpan(r,n)},h.lslide=function(r,n){return h.rpan(r,n)},h.dslide=function(r,n){return h.upan(r,n)},h.uslide=function(r,n){return h.dpan(r,n)},h.transpose=function(r){for(var n=[],t=0,e=r.length;e>t;t++)for(var u=r[t],o=0,a=u.length;a>o;o++)n[o]||(n[o]=[]),n[o][t]=u[o];return n},h.antitranspose=function(r){var n=h.rrotate(r);return h.vflip(n)},h.pad=function(r,n,t,e){switch(n){case h.EDGES.TOP:return h.upad(r,t,e);case h.EDGES.BOTTOM:return h.dpad(r,t,e);case h.EDGES.LEFT:return h.lpad(r,t,e);case h.EDGES.RIGHT:return h.rpad(r,t,e);default:throw"Array2D.js: Invalid side provided"}},h.upad=function(r,n,e){for(var u=[],o=h.dimensions(r),a=o[0],i=o[1],f=-n;i>f;f++){var s=f+n;u[s]=[];for(var c=0;a>c;c++)u[s][c]=f>-1?r[f][c]:t(e)?null:e}return u},h.dpad=function(r,n,e){for(var u=[],o=h.dimensions(r),a=o[0],i=o[1],f=0;i+n>f;f++){u[f]=[];for(var s=0;a>s;s++)u[f][s]=i>f?r[f][s]:t(e)?null:e}return u},h.lpad=function(r,n,e){for(var u=[],o=h.dimensions(r),a=o[0],i=o[1],f=0;i>f;f++){u[f]=[];for(var s=-n;a>s;s++){var c=s+n;u[f][c]=s>-1?r[f][s]:t(e)?null:e}}return u},h.rpad=function(r,n,e){for(var u=[],o=h.dimensions(r),a=o[0],i=o[1],f=0;i>f;f++){u[f]=[];for(var s=0;a+n>s;s++)u[f][s]=a>s?r[f][s]:t(e)?null:e}return u},h.trim=function(r,n,t){switch(n){case h.EDGES.TOP:return h.utrim(r,t);case h.EDGES.BOTTOM:return h.dtrim(r,t);case h.EDGES.LEFT:return h.ltrim(r,t);case h.EDGES.RIGHT:return h.rtrim(r,t);default:throw"Array2D.js: Invalid edge provided for trim"}},h.utrim=function(r,n){var t=[];n||(n=1);for(var e=n,u=r.length;u>e;e++)t[e-n]=a(r[e]);return t},h.dtrim=function(r,n){var t=[];n||(n=1);for(var e=0,u=r.length-n;u>e;e++)t[e]=a(r[e]);return t},h.ltrim=function(r,n){var t=[];n||(n=1);for(var e=0,u=r.length;u>e;e++){t[e]=[];for(var o=r[e],a=n,i=o.length;i>a;a++)t[e][a-n]=o[a]}return t},h.rtrim=function(r,n){var t=[];n||(n=1);for(var e=0,u=r.length;u>e;e++){t[e]=[];for(var o=r[e],a=0,i=o.length-n;i>a;a++)t[e][a]=o[a]}return t},h.paste=function(n,e,u,o){for(var a=[],i=0,f=n.length;f>i;i++){a[i]=[];for(var h=n[i].length,s=i-u,c=0;h>c;c++){var l=c-o;a[i][c]=r(e[s])&&!t(e[s][l])&&i>=u&&c>=o&&f>s&&h>l?e[s][l]:n[i][c]}}return a},h.glue=function(r,n,t,e){var u=h.dimensions(r),o=h.dimensions(n),a=u[0]>o[0]?u[0]:o[0],i=u[1]>o[1]?u[1]:o[1],f=Math.abs(e)+a,s=Math.abs(t)+i,c=h.build(f,s),l=0>t?-t:0,v=0>e?-e:0,g=h.paste(c,r,l,v),d=t>0?t:0,p=e>0?e:0,E=h.paste(g,n,d,p);return E},h.stitch=function(r,n,t){switch(t){case h.EDGES.TOP:return h.ustitch(r,n);case h.EDGES.BOTTOM:return h.dstitch(r,n);case h.EDGES.LEFT:return h.lstitch(r,n);case h.EDGES.RIGHT:return h.rstitch(r,n);default:throw"Array2D.js: Invalid stitching edge provided"}},h.ustitch=function(r,n){var t=h.dimensions(n)[1];return h.glue(r,n,-t,0)},h.dstitch=function(r,n){var t=h.dimensions(r)[1];return h.glue(r,n,t,0)},h.lstitch=function(r,n){var t=h.dimensions(n)[0];return h.glue(r,n,0,-t)},h.rstitch=function(r,n){var t=h.dimensions(r)[0];return h.glue(r,n,0,t)},h.shuffle=function(r){for(var n=[],t=0,e=r.length;e>t;t++)n.push(r[t].length);for(var u=h.flatten(r),t=u.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),a=u[t];u[t]=u[o],u[o]=a}for(var i=[],t=0,e=n.length;e>t;t++){for(var f=[],s=n[t];s--;)f.push(u.pop());i.push(f)}return i},h.flatten=function(r){for(var n=[],t=0,e=r.length;e>t;t++)for(var u=r[t],o=0,a=u.length;a>o;o++)n.push(u[o]);return n},h.squash=function(r){var n=h.transpose(r);return h.flatten(n)},h.reduce=function(r,n){for(var t=[],e=0,u=r.length;u>e;e++)t[e]=n(r[e],e,r);return t},h.boildown=function(r,n){var t=h.transpose(r);return h.reduce(t,n)},h.symmetrical=function(r,n){switch(n){case h.AXES.Y:return h.hsymmetrical(r);case h.AXES.X:return h.vsymmetrical(r);default:throw"Array2D.js: Invalid axis given for symmetry"}},h.hsymmetrical=function(r){for(var n=0,t=r.length;t>n;n++)for(var e=r[n],u=0,o=e.length;o>u;u++){var a=e[u],i=e[o-1-u];if(a!==i)return!1}return!0},h.vsymmetrical=function(r){var n=h.transpose(r);return h.hsymmetrical(n)},h.includes=function(){throw"Array2D.js: Not yet implemented"},h.fromCanvas=function(r){for(var n=r.getContext("2d"),t=n.getImageData(0,0,r.width,r.width),e=t.width,u=t.height,o=t.data,a=[],i=0,f=o.length;f>i;i+=4){var s=o[i],c=o[i+1],l=o[i+2],v=o[i+3],g=[s,c,l,v];a.push(g)}return h.fromArray(a,u,e)},h.toCanvas=function(r,n,t){for(var e,u=n.getContext("2d"),o=n.width,a=n.height,i=u.createImageData(o,a),f=i.data,h=0,s=r.length;s>h;h++)for(var c=r[h],l=0,v=c.length;v>l;l++){var g=c[l];e=t?t(g,h,l,r):g;var d=4*(h*o+l);f[d+0]=e[0],f[d+1]=e[1],f[d+2]=e[2],f[d+3]=e[3]}u.putImageData(i,0,0)},h.fromArray=function(r,n,t){for(var e=[],u=0;n>u;u++){e[u]=[];for(var o=0;t>o;o++)e[u][o]=r[u*t+o]}return e}}).call(this);